#+TITLE: Factors
#+OPTIONS: H:2 toc:2 num:2 ^:nil
#+AUTHOR: ChrisChen
#+EMAIL: ChrisChen3121@gmail.com

* Overview
  A factor is a list of numerical values, one for each stock, *potentially predictive* of an aspect
  of the performance of these stocks in the future.

  Other words, factors are signals that help suggest where to place bets in a portfolio of stocks
  and further suggest what relative magnitudes of those bets should be.


  - Alpha Factors :: drivers of mean returns
  - Risk Factors :: drivers of volatility

** Categories
   - Momentum
   - Fundamental information
   - Signals from social media

** Example of a Factor
   - Hypothesis: one-year return indicates momentum for next few days.
   - Factor: one-year return of each stock in stock universe.

   - Target
     - Predict future price value? Difficult.
     - Compare stocks using factor values? More feasible.

   - Follow the hypothesis indication: Higher factor value -> hypothesize higher expected future return -> Higher weight

* Standardizing Factors
  1. Sum of weights equals zero
     - ~de-mean~ $\forall{i}\ x_i = raw_i - raw_\mu$
  1. Sum of absolute values equals one (i.e. leverage ratio = 1)
     - ~re-scaled~: $\lambda=\sum_{i=1}^N|x_i|$ and $\forall{i}\ x_i = \frac{x_i}{\lambda}$

** Example
   [[../../resources/MOOC/Trading/standardize_factors.png]]

** Leverage Ratio
   Leverage ratio in portfolio is =sum of positions/notional=.
   $$ratio=\frac{\sum_{i=1}^N|p_i|}{Notional}$$
   - =sum of weights= should be 2 if the leverage ratio you choose is 2.

* Linear Factor Model
  $$r_i=b_{i1}f_1+b_{i2}f_2+...+b_{iK}f_K+s_i$$
  $$\boldsymbol{r}=\boldsymbol{Bf+s}$$
  - $r_i$: the return on asset $i$
  - $f_1$: the value of factor return 1
  - $b_{i1}$(stock exposures to factors): the change in the return on asset $i$ per unit change in factor return 1
  - $K$: the number of factors
  - $s_i$(/error term/ or /unexplained portion/): the portion of the return on asset i not related to the $K$ factors


** Terminology
   - Factor returns (the $f_k s$) may be:
     - macro-economic variables
     - returns on *pre-specified portfolios*
     - returns on zero-investment strategies (long and short positions of equal value) giving maximum exposure to fundamental or macro-economic factors
     - returns on benchmark portfolios representing asset classes
     - ...
   - $b_{ij}$ coefficients may be called:
     - factor exposures
     - factor sensitivities
     - factor loadings
     - factor betas
     - asset exposures
     - style
     - ...
   - $s_i$ term may be called:
     - idiosyncratic return
     - security-specific return
     - non-factor return
     - residual return
     - selection return
     - ...

** Assumptions
   - $Corr(s_i, f_k)=0$ for every $i$ and $k$
   - $Corr(s_i, s_j)=0$ for every $i$ not equal to $j$
   - Residual $s_i$ is specific or "idiosyncratic" to asset $i$

   [[https://youtu.be/qEu3m_3eGWk][Video]]

** Matrix
   $\boldsymbol{r}=\begin{bmatrix}
   r_1 \\
   \vdots \\
   r_N
   \end{bmatrix}$

   $B=\begin{bmatrix}
   B_{1,1} & \cdots & B_{1,K} \\
   \vdots & \ddots & \vdots \\
   B_{N,1} & \cdots & B_{N,K}
   \end{bmatrix}$

   $\boldsymbol{f}=\begin{bmatrix}
   f_1 \\
   \vdots \\
   f_K
   \end{bmatrix}$

   $\boldsymbol{s}=\begin{bmatrix}
   s_1 \\
   \vdots \\
   s_N
   \end{bmatrix}$
   - N: number of companies
   - K: number of factors

   Calculate the covariance matrix of the asset returns.
   $$Cov=E[\boldsymbol{r}\boldsymbol{r}^T]=E[(\boldsymbol{Bf+s})(\boldsymbol{Bf+s})^T]=\boldsymbol{BFB}^T+\boldsymbol{S}$$

   [[../../resources/MOOC/Trading/cov_matrix_factor_model.png]]
   [[https://youtu.be/_qfTLXoifsM][Video]]

* Inspirations
** Momentum Indicators
   - Moving averages
   - Large price movements with volume
   - Stocks making new highs

** Overlap Studies
*** Bollinger Bands
    [[../../resources/MOOC/Trading/bollinger_bands.png]]
