<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2021-09-16 Thu 17:58 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>AI for Trading</title>
<meta name="generator" content="Org mode" />
<meta name="author" content="ChrisChen" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
	     margin-bottom: .2em; }
  .subtitle { text-align: center;
	      font-size: medium;
	      font-weight: bold;
	      margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
	    padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: auto;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline; margin-top: 14px;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<link rel="stylesheet" type="text/css" href="https://gongzhitaao.org/orgcss/org.css">
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
	displayAlign: "left",
	displayIndent: "2em",

	"HTML-CSS": { scale: 100,
			linebreaks: { automatic: "false" },
			webFont: "TeX"
		       },
	SVG: {scale: 100,
	      linebreaks: { automatic: "false" },
	      font: "TeX"},
	NativeMML: {scale: 100},
	TeX: { equationNumbers: {autoNumber: "AMS"},
	       MultLineWidth: "85%",
	       TagSide: "left",
	       TagIndent: ".8em"
	     }
});
</script>
<script type="text/javascript"
	src="https://cdn.bootcdn.net/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS_HTML"></script>
</head>
<body>
<div id="content">
<h1 class="title">AI for Trading</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org19ce956">1. Financial Data</a>
<ul>
<li><a href="#org93b54c1">1.1. Data Types</a></li>
</ul>
</li>
<li><a href="#orgc7884af">2. Fundamental Analysis</a>
<ul>
<li><a href="#org332aa1d">2.1. Data Sources</a></li>
<li><a href="#orgf212129">2.2. PE ratio</a></li>
<li><a href="#orge7cc7e1">2.3. Other Key Factors</a></li>
<li><a href="#org0f631a1">2.4. Key Points</a></li>
</ul>
</li>
<li><a href="#org393d51a">3. Returns</a>
<ul>
<li><a href="#orgd2cbaed">3.1. Relations between Raw and Log</a></li>
<li><a href="#org5da26d7">3.2. Continuous Compounding</a></li>
<li><a href="#orgd8861db">3.3. Compounding</a></li>
<li><a href="#org910c672">3.4. Distribution of Returns</a></li>
<li><a href="#org0f7833d">3.5. Why Log Returns?</a></li>
</ul>
</li>
<li><a href="#org9ca11e6">4. Indicators</a>
<ul>
<li><a href="#org5fdb103">4.1. Overlap Studies</a></li>
<li><a href="#orge43d401">4.2. Momentum Indicators</a></li>
</ul>
</li>
<li><a href="#orgcf7db93">5. Trading Strategies</a>
<ul>
<li><a href="#orgfcc8319">5.1. Types of Trading Strategies</a></li>
<li><a href="#org33fa3c7">5.2. Cross-sectional Strategy</a></li>
<li><a href="#org05c84d4">5.3. Statistical Analysis for Returns</a></li>
</ul>
</li>
<li><a href="#org07ee644">6. Risks</a></li>
<li><a href="#org76303a5">7. Data Processing</a>
<ul>
<li><a href="#orge24087f">7.1. Outliers</a></li>
<li><a href="#orgce22d18">7.2. Testing for Normality</a></li>
<li><a href="#org0734221">7.3. Testing for Stationary</a></li>
<li><a href="#org07c73b4">7.4. Transform into Normality &amp; Stationary</a></li>
<li><a href="#orgf2c0911">7.5. Regression</a></li>
<li><a href="#orgc7b4034">7.6. Time Series Modeling</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-org19ce956" class="outline-2">
<h2 id="org19ce956"><span class="section-number-2">1</span> Financial Data</h2>
<div class="outline-text-2" id="text-1">
</div>
<div id="outline-container-org93b54c1" class="outline-3">
<h3 id="org93b54c1"><span class="section-number-3">1.1</span> Data Types</h3>
<div class="outline-text-3" id="text-1-1">
</div>
<div id="outline-container-org2417e61" class="outline-4">
<h4 id="org2417e61"><span class="section-number-4">1.1.1</span> Market Data</h4>
<div class="outline-text-4" id="text-1-1-1">
<ul class="org-ul">
<li>Tick Data
<ul class="org-ul">
<li>Quote Data: bid, bid size, ask, ask size</li>
<li>Trade Data: last trade, volume</li>
</ul></li>
<li>OHLC: open, high, low, close</li>
<li>Orderbook</li>
<li>Transaction</li>
</ul>
</div>
</div>

<div id="outline-container-org4729c55" class="outline-4">
<h4 id="org4729c55"><span class="section-number-4">1.1.2</span> Corporate Actions</h4>
<div class="outline-text-4" id="text-1-1-2">
<ul class="org-ul">
<li>Stock Splits</li>
<li>Cash Dividends: Partial cash distribution of company earnings.
<ul class="org-ul">
<li>Symbol, Ex-Dividend Date, Dividend, Record Date, Announcement Date, Payment Date</li>
<li>Adjusted Price Factor: \(1+D/S\)  D: Dividend  S: Stock price at ex-dividend date</li>
<li>Divide the historical price by the adjusted price factor to normalize.</li>
</ul></li>
<li>&#x2026;</li>
</ul>
</div>
</div>

<div id="outline-container-orgd701e96" class="outline-4">
<h4 id="orgd701e96"><span class="section-number-4">1.1.3</span> Alternative Data</h4>
<div class="outline-text-4" id="text-1-1-3">
<ul class="org-ul">
<li>Social Media Posts: can convey sentiment towards companies.</li>
<li>News Articles: can shape investor opinion.</li>
<li>Satellite Images: used to estimate crop yield.</li>
<li>Consumer Data: can predict sales and revenue long before official announcements.</li>
</ul>
</div>
</div>
</div>
</div>

<div id="outline-container-orgc7884af" class="outline-2">
<h2 id="orgc7884af"><span class="section-number-2">2</span> Fundamental Analysis</h2>
<div class="outline-text-2" id="text-2">
</div>
<div id="outline-container-org332aa1d" class="outline-3">
<h3 id="org332aa1d"><span class="section-number-3">2.1</span> Data Sources</h3>
<div class="outline-text-3" id="text-2-1">
<p>
(usually updated every quarter)
</p>
<ul class="org-ul">
<li>Balance Sheet</li>
<li>Cash Flow Statements</li>
</ul>
</div>
</div>

<div id="outline-container-orgf212129" class="outline-3">
<h3 id="orgf212129"><span class="section-number-3">2.2</span> PE ratio</h3>
<div class="outline-text-3" id="text-2-2">
<p>
Price to Earnings Ratio. It's important to be careful about how we interpret a high or low PE ratio.
The market price of a share is based on the <b>collective estimates</b> by investors of the company's <b>current equity</b> plus its <b>future earnings</b>.
The future earnings are based on estimates of future cash flow, which are then adjusted to their <b>Present Value</b> (PV).
</p>
<ul class="org-ul">
<li>High PE ratio: A company may have low or negative earnings, but a high stock price due to the estimated future earnings.</li>
<li>Low PE ratio: may be a company has high and stable earnings, but less expectations for future growth.</li>
</ul>
</div>
</div>

<div id="outline-container-orge7cc7e1" class="outline-3">
<h3 id="orge7cc7e1"><span class="section-number-3">2.3</span> Other Key Factors</h3>
<div class="outline-text-3" id="text-2-3">
<ul class="org-ul">
<li>Sales Per Share(Revenue is the same)</li>
<li>Earnings Per Share
<ul class="org-ul">
<li>Earnings gives investors a sense of how much the equity of the company has changed over the past 3 months.</li>
</ul></li>
<li>Dividends Per Share</li>
</ul>
</div>
</div>


<div id="outline-container-org0f631a1" class="outline-3">
<h3 id="org0f631a1"><span class="section-number-3">2.4</span> Key Points</h3>
<div class="outline-text-3" id="text-2-4">
<ul class="org-ul">
<li>Try to analyze a collection of different measures over time.</li>
<li>Can be used as risk factors.</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-org393d51a" class="outline-2">
<h2 id="org393d51a"><span class="section-number-2">3</span> Returns</h2>
<div class="outline-text-2" id="text-3">
<p>
\[RawReturn(r) = \frac{p_t - p_{t-1}}{p_{t-1}}\]
\[LogReturn(R) = ln(p_t/p_{t-1})\]
</p>
</div>
<div id="outline-container-orgd2cbaed" class="outline-3">
<h3 id="orgd2cbaed"><span class="section-number-3">3.1</span> Relations between Raw and Log</h3>
<div class="outline-text-3" id="text-3-1">
<p>
\[LogReturn=ln(RawReturn+1)\]
\[RawReturn=e^{LogReturn}-1\]
</p>
</div>
</div>

<div id="outline-container-org5da26d7" class="outline-3">
<h3 id="org5da26d7"><span class="section-number-3">3.2</span> Continuous Compounding</h3>
<div class="outline-text-3" id="text-3-2">
<ul class="org-ul">
<li>Compounding Formula</li>
</ul>
<p>
\[p_t=p_{t-1}(1+\frac{r}{n})^n\]
</p>
<ul class="org-ul">
<li>Now make <b>n</b> bigger and bigger</li>
</ul>
<p>
\[\lim_{n \to \infty}(1+\frac{r}{n})^n=e^r\]
</p>
<ul class="org-ul">
<li>Compounding infinitely often is called <b>continuous compounding</b></li>
</ul>
<p>
\[100\times e^{0.04}=104.08\]
</p>
<ul class="org-ul">
<li>Reverse the previous calculation</li>
</ul>
<p>
\[104.08/100=e^r\]
\[r=ln(104.08/100)=0.04\]
</p>
<ul class="org-ul">
<li>r is the <b>continuously compounded return</b>. It is just the <b>log return</b></li>
</ul>
</div>

<div id="outline-container-org0e7f598" class="outline-4">
<h4 id="org0e7f598"><span class="section-number-4">3.2.1</span> Additivity</h4>
<div class="outline-text-4" id="text-3-2-1">
<p>
Annual rate of <b>continuous compounding</b> is simply the sum of the monthly rates.
</p>
<ul class="org-ul">
<li>invest $100 for two years with a monthly  continuously compounded interest rate was 2%</li>
</ul>
<p>
\[100\times{e^{0.02}}\times{e^{0.02}}... = 100\times{e^{(0.02+0.02+...)}}=100\times{e^{0.24}}=127.12\]
</p>
<ul class="org-ul">
<li>Time Additivity of Log Returns. <b>log return for Jan and Feb = log return for Jan + log return for Feb</b></li>
</ul>
<p>
\[ln(\frac{p_{Mar 1}}{p_{Jan 1}}) = ln(\frac{p_{Mar 1}}{p_{Feb 1}}) + ln(\frac{p_{Feb 1}}{p_{Jan 1}})\]
</p>
</div>
</div>

<div id="outline-container-org46ebbac" class="outline-4">
<h4 id="org46ebbac"><span class="section-number-4">3.2.2</span> Annualized Rate of Return</h4>
<div class="outline-text-4" id="text-3-2-2">
<p>
If we just had a single monthly rate, but we assumed that the rates for all the months of the year were the same,
we could <i>extrapolate</i> the monthly rate to an annual rate by multiplying by 12. This is called <b>annualizing the
rate of continuous compounding</b>.
\[LogReturn(Y)=\sum_{M=1}^{12} LogReturn(M)=MeanOfLogReturn(M)\times 12\]
\[RawReturn(Y)=e^{LogReturn(Y)}-1\]
</p>
</div>
</div>
</div>

<div id="outline-container-orgd8861db" class="outline-3">
<h3 id="orgd8861db"><span class="section-number-3">3.3</span> Compounding</h3>
<div class="outline-text-3" id="text-3-3">
<ul class="org-ul">
<li>rate of interest of 4%</li>
</ul>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Compounding Frequency</th>
<th scope="col" class="org-left">Value of $100 after 1 year</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">Annually(n=1)</td>
<td class="org-left">$104.00</td>
</tr>

<tr>
<td class="org-left">Quarterly(n=4)</td>
<td class="org-left">$104.06</td>
</tr>

<tr>
<td class="org-left">Weekly(n=52)</td>
<td class="org-left">$104.08</td>
</tr>

<tr>
<td class="org-left">Daily(n=252)</td>
<td class="org-left">$104.08</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-org910c672" class="outline-3">
<h3 id="org910c672"><span class="section-number-3">3.4</span> Distribution of Returns</h3>
<div class="outline-text-3" id="text-3-4">
<p>
The conversation about the best model for the distribution of returns has been going on for at least the past century.
The best model will depend on exactly what your analysis seeks to achieve.
<img src="../resources/MOOC/Trading/returns_distributions.png" alt="returns_distributions.png" />
</p>
</div>
</div>

<div id="outline-container-org0f7833d" class="outline-3">
<h3 id="org0f7833d"><span class="section-number-3">3.5</span> Why Log Returns?</h3>
<div class="outline-text-3" id="text-3-5">
<ol class="org-ol">
<li>Log returns can be interpreted as <b>continuously compounded returns</b>.</li>
<li>Log returns are time-additive. The multi-period log return is simply the sum of single period log returns.</li>
<li>The use of log returns prevents security prices from becoming negative in models of security returns.</li>
<li>log returns of a security can be reasonably modeled as distributed according to a normal distribution. ?</li>
<li>When returns and log returns are small, their values are approximately equal.</li>
<li>Logarithms can help make an algorithm more <b>numerically stable</b>.</li>
</ol>
</div>
</div>
</div>

<div id="outline-container-org9ca11e6" class="outline-2">
<h2 id="org9ca11e6"><span class="section-number-2">4</span> Indicators</h2>
<div class="outline-text-2" id="text-4">
</div>
<div id="outline-container-org5fdb103" class="outline-3">
<h3 id="org5fdb103"><span class="section-number-3">4.1</span> Overlap Studies</h3>
<div class="outline-text-3" id="text-4-1">
</div>
<div id="outline-container-org9c57cc6" class="outline-4">
<h4 id="org9c57cc6"><span class="section-number-4">4.1.1</span> Bollinger Bands</h4>
<div class="outline-text-4" id="text-4-1-1">

<div id="org18367c9" class="figure">
<p><img src="../resources/MOOC/Trading/bollinger_bands.png" alt="bollinger_bands.png" />
</p>
</div>
</div>
</div>
</div>

<div id="outline-container-orge43d401" class="outline-3">
<h3 id="orge43d401"><span class="section-number-3">4.2</span> Momentum Indicators</h3>
<div class="outline-text-3" id="text-4-2">
<ul class="org-ul">
<li>moving averages</li>
<li>large price movements with volume</li>
<li>stocks making new highs</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-orgcf7db93" class="outline-2">
<h2 id="orgcf7db93"><span class="section-number-2">5</span> Trading Strategies</h2>
<div class="outline-text-2" id="text-5">
</div>
<div id="outline-container-orgfcc8319" class="outline-3">
<h3 id="orgfcc8319"><span class="section-number-3">5.1</span> Types of Trading Strategies</h3>
<div class="outline-text-3" id="text-5-1">
<ol class="org-ol">
<li>Single Asset Strategies</li>
<li>Pairwise Strategies</li>
<li>Cross-sectional Strategies(statistical arbitrage, market neutral investing): use group of assets</li>
<li>Alternative Data Based Strategies: Satellite Imagery, Social Media, Geolocation, Consumer Transaction Data</li>
</ol>

<p>
Large hedge funds are most interested in 3 and 4, large hedge funds seek:
</p>
<ul class="org-ul">
<li>High capacity -&gt; 3</li>
<li>New, different ideas -&gt; 4
<ul class="org-ul">
<li>Hedge funds hope to uncover signals in hard-to-find, expensive and difficult to work with data.</li>
</ul></li>
</ul>
</div>
</div>

<div id="outline-container-org33fa3c7" class="outline-3">
<h3 id="org33fa3c7"><span class="section-number-3">5.2</span> Cross-sectional Strategy</h3>
<div class="outline-text-3" id="text-5-2">
</div>
<div id="outline-container-orgeae4a51" class="outline-4">
<h4 id="orgeae4a51"><span class="section-number-4">5.2.1</span> Process of Cross-sectional Strategies</h4>
<div class="outline-text-4" id="text-5-2-1">

<div id="org9e83c6b" class="figure">
<p><img src="../resources/MOOC/Trading/cross_sectional.png" alt="cross_sectional.png" />
</p>
</div>
</div>
</div>


<div id="outline-container-org938a241" class="outline-4">
<h4 id="org938a241"><span class="section-number-4">5.2.2</span> Alpha Research Flow</h4>
<div class="outline-text-4" id="text-5-2-2">
<ol class="org-ol">
<li>Observation: Find a pattern that seems to be recurring in the market over time.</li>
<li>Turn the observation into Alpha(an expression), both mathematically and programmatically.</li>
<li>(Alpha Combination: To combine several Alphas into an overall Alpha).
<ul class="org-ul">
<li>Important step in modern markets</li>
<li>Try to combine <b>different</b> inputs: e.g. Momentum alpha + Fundamental alpha</li>
</ul></li>
<li>Use historical data to verify it.</li>
<li>Define strategy in more detailed manner, then run full backtesting exercises.</li>
</ol>


<p>
Videos: <a href="https://youtu.be/cnJK8c2zfq4">Part1</a> <a href="https://youtu.be/v3w4JZKQixc">Part2</a> <a href="https://youtu.be/vSxnkduTWWY">Part3</a>
</p>
</div>
</div>

<div id="outline-container-org1fc6e97" class="outline-4">
<h4 id="org1fc6e97"><span class="section-number-4">5.2.3</span> Momentum Strategy Example</h4>
<div class="outline-text-4" id="text-5-2-3">
<ol class="org-ol">
<li>Choose a stock universe (attention: avoid <b>Survivorship Bias</b>)</li>
<li>Re-sample prices if needed, then compute log returns.</li>
<li>Rank by returns, select top-n/bottom-n(cross-sectional analysis)</li>
<li>Compute long and short portfolio returns</li>
<li>Combine portfolio returns</li>
</ol>
</div>
</div>
</div>

<div id="outline-container-org05c84d4" class="outline-3">
<h3 id="org05c84d4"><span class="section-number-3">5.3</span> Statistical Analysis for Returns</h3>
<div class="outline-text-3" id="text-5-3">
<ul class="org-ul">
<li>Sample Monthly Mean Return: \(\bar{x}\)</li>
<li>t-statistic: \(t=\frac{{\bar{x}-\mu_0}}{SE}=\frac{\bar{x}}{SE}\) (if the true mean month return \(\mu_0\) is 0)</li>
<li>\(H_0\): \(\mu=0\)</li>
<li>\(H_A\): \(\mu>0\)</li>
<li>If <b>P-Value</b> \(\le\alpha\) level, then reject \(H_0\).</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-org07ee644" class="outline-2">
<h2 id="org07ee644"><span class="section-number-2">6</span> Risks</h2>
<div class="outline-text-2" id="text-6">
<ul class="org-ul">
<li>Systematic Risks: Inherent to entire market
<ul class="org-ul">
<li>inflation</li>
<li>recession</li>
<li>interest rates</li>
<li>GDP</li>
</ul></li>
<li>Sector-specific Risks
<ul class="org-ul">
<li>regulation</li>
<li>legislation</li>
<li>materials costs</li>
</ul></li>
<li>Idiosyncratic Risks(Specific Risks)
<ul class="org-ul">
<li>labor strike</li>
<li>managerial change</li>
</ul></li>
</ul>
</div>
</div>

<div id="outline-container-org76303a5" class="outline-2">
<h2 id="org76303a5"><span class="section-number-2">7</span> Data Processing</h2>
<div class="outline-text-2" id="text-7">
</div>
<div id="outline-container-orge24087f" class="outline-3">
<h3 id="orge24087f"><span class="section-number-3">7.1</span> Outliers</h3>
<div class="outline-text-3" id="text-7-1">
<p>
Sources of outliers:
</p>
<ul class="org-ul">
<li>Fat Finger Errors</li>
<li>Data Errors: missing value, 0s, duplicate values&#x2026;(could check if volume was 0)</li>
<li>Earnings, mergers and other announcements</li>
</ul>
</div>

<div id="outline-container-orgfb8182d" class="outline-4">
<h4 id="orgfb8182d"><span class="section-number-4">7.1.1</span> Spotting Outliers in Raw Data</h4>
<div class="outline-text-4" id="text-7-1-1">
<ul class="org-ul">
<li>Screen the data</li>
<li>Rule-based searching and filtering methods. Examples:
<ul class="org-ul">
<li>percent change thresholds (but will yield many false positives)</li>
<li>can use volume information to improve the accuracy of the filter</li>
</ul></li>
</ul>
</div>
</div>

<div id="outline-container-org7081823" class="outline-4">
<h4 id="org7081823"><span class="section-number-4">7.1.2</span> Handling Outliers in Raw Data</h4>
<div class="outline-text-4" id="text-7-1-2">
<ul class="org-ul">
<li><b>Cross check with another data source</b></li>
<li>Minimize false positives</li>
<li>Decide how to deal with data values are missing</li>
<li>May keep the missing data, especially when they represent a real non-tradable event.</li>
</ul>
</div>
</div>

<div id="outline-container-orgd483fa8" class="outline-4">
<h4 id="orgd483fa8"><span class="section-number-4">7.1.3</span> Spotting Outliers in Signal Returns</h4>
<div class="outline-text-4" id="text-7-1-3">
<ul class="org-ul">
<li>Look at the return distribution (skeptical when it's too good)</li>
<li>Compare return distribution to the normal distribution using <b>QQ Plots</b>
<ul class="org-ul">
<li>A good quant should try to understand the cause of outliers and returns.</li>
<li>Check the dates and stocks that causes the difference.</li>
</ul></li>
</ul>
</div>
</div>

<div id="outline-container-org59536c8" class="outline-4">
<h4 id="org59536c8"><span class="section-number-4">7.1.4</span> Handling Outliers in Signal Returns</h4>
<div class="outline-text-4" id="text-7-1-4">
<ul class="org-ul">
<li>Case1: Data error from venders
<ul class="org-ul">
<li>fix it by replacing with correct data from other venders</li>
<li>try to determine if the result will be greatly affected if the data is replaced by any reasonable value.</li>
</ul></li>
<li>Case2: Due to legit market events
<ul class="org-ul">
<li>exclude small market cap assets (they're hard to predict)</li>
</ul></li>
<li>Case3: Earnings, announcements
<ul class="org-ul">
<li>check if you can pause before these events</li>
<li>try to avoid losing money when you can't pause before the event</li>
</ul></li>
</ul>
</div>
</div>

<div id="outline-container-org4190c49" class="outline-4">
<h4 id="org4190c49"><span class="section-number-4">7.1.5</span> Ways to Reduce Effect of Outliers</h4>
<div class="outline-text-4" id="text-7-1-5">
<ul class="org-ul">
<li>Moving Windows: But signals may be generated with a slight delay depending on the window size.</li>
<li>Use average prices of many stocks or even entire sector or index.</li>
<li>(Optional) May incorporate Bayesian methods or machine learning into outlier detection.</li>
</ul>
</div>
</div>

<div id="outline-container-orgb8917f3" class="outline-4">
<h4 id="orgb8917f3"><span class="section-number-4">7.1.6</span> Filtering Decision Example</h4>
<div class="outline-text-4" id="text-7-1-6">
<p>
Stock prices are volatile during market crashes. Two ways to handle:
</p>
<ul class="org-ul">
<li>Including the data during these periods
<ul class="org-ul">
<li>the results will be highly skewed.</li>
<li>the signals won't perform optimally on normal trading days.</li>
</ul></li>
<li>Not including these data
<ul class="org-ul">
<li>When the event happens, the signal may perform really poorly.</li>
<li>To establish <b>stop loss levels</b> thresholds to prevent further losses.</li>
</ul></li>
</ul>
</div>
</div>
</div>

<div id="outline-container-orgce22d18" class="outline-3">
<h3 id="orgce22d18"><span class="section-number-3">7.2</span> Testing for Normality</h3>
<div class="outline-text-3" id="text-7-2">
</div>
<div id="outline-container-orgf81ac00" class="outline-4">
<h4 id="orgf81ac00"><span class="section-number-4">7.2.1</span> Why to Check If the Data is Normal?</h4>
<div class="outline-text-4" id="text-7-2-1">
<p>
When we use statistical models such as regression. We use hypotheses tests to check if we can trust the model parameters of the model.
These tests assume that our data is normally distributed.
If our data is not normally distributed, these tests tend to tell us the model is valid when in fact it is not.
</p>
</div>
</div>

<div id="outline-container-orgc0106e0" class="outline-4">
<h4 id="orgc0106e0"><span class="section-number-4">7.2.2</span> Box Plot</h4>
<div class="outline-text-4" id="text-7-2-2">
<ul class="org-ul">
<li>Use <b>Boxplot</b> to check for <b>symmetry</b>.</li>
</ul>

<div id="org9413d66" class="figure">
<p><img src="../resources/MOOC/Trading/boxplot_of_normal_distribution.png" alt="boxplot_of_normal_distribution.png" />
</p>
</div>
</div>
</div>

<div id="outline-container-org3d4ec73" class="outline-4">
<h4 id="org3d4ec73"><span class="section-number-4">7.2.3</span> QQ Plot</h4>
<div class="outline-text-4" id="text-7-2-3">
<p>
Quantile-Quantile Plot. Common quantiles are:
</p>
<ul class="org-ul">
<li>Quartiles: 4 groups</li>
<li>Deciles: 10 groups</li>
<li>Percentiles: 100 groups</li>
</ul>
<div class="org-src-container">
<pre class="src src-python"><span style="color: #3a81c3; font-weight: bold;">import</span> matplotlib.pyplot <span style="color: #3a81c3; font-weight: bold;">as</span> plt
<span style="color: #3a81c3; font-weight: bold;">from</span> scipy.stats <span style="color: #3a81c3; font-weight: bold;">import</span> gamma
<span style="color: #715ab1;">data</span> = gamma.rvs<span style="color: #3a81c3;">(</span>a=5, size=10000<span style="color: #3a81c3;">)</span>
stats.probplot<span style="color: #3a81c3;">(</span>data, dist=<span style="color: #2d9574;">"norm"</span>, plot=plt<span style="color: #3a81c3;">)</span>
plt.show<span style="color: #3a81c3;">()</span>
</pre>
</div>

<div id="org9d16d65" class="figure">
<p><img src="../resources/MOOC/Trading/qq_plot.png" alt="qq_plot.png" />
</p>
</div>
</div>
</div>

<div id="outline-container-org3d0263e" class="outline-4">
<h4 id="org3d0263e"><span class="section-number-4">7.2.4</span> Single Number Testing (cutoff point)</h4>
<div class="outline-text-4" id="text-7-2-4">
<ul class="org-ul">
<li>Shapiro-Wilk Test <code>stats.shapiro</code>: \(H_0\) - data is normally distributed</li>
<li>D'Agostino-Pearson Test: \(H_0\) - data is normally distributed</li>
<li><p>
Kolmogorov-Smirnov Test: \(H_0\) - given two distribution, they are the same.
</p>
<div class="org-src-container">
<pre class="src src-python"><span style="color: #3a81c3; font-weight: bold;">from</span> scipy <span style="color: #3a81c3; font-weight: bold;">import</span> stats
<span style="color: #715ab1;">sample</span> = stats.lognorm.rvs<span style="color: #3a81c3;">(</span>s=0.5, loc=0.0, scale=1.0, size=1000<span style="color: #3a81c3;">)</span>
<span style="color: #715ab1;">normal_args</span> = <span style="color: #3a81c3;">(</span>sample.mean<span style="color: #6c3163;">()</span>, sample.std<span style="color: #6c3163;">()</span><span style="color: #3a81c3;">)</span>
<span style="color: #715ab1;">result</span> = stats.kstest<span style="color: #3a81c3;">(</span>sample, <span style="color: #2d9574;">"norm"</span>, normal_args<span style="color: #3a81c3;">)</span>
<span style="color: #3a81c3; font-weight: bold;">assert</span> result.pvalue &lt; 0.05
</pre>
</div></li>
</ul>
</div>
</div>
</div>

<div id="outline-container-org0734221" class="outline-3">
<h3 id="org0734221"><span class="section-number-3">7.3</span> Testing for Stationary</h3>
<div class="outline-text-3" id="text-7-3">
<dl class="org-dl">
<dt>Stationary</dt><dd>The <i>mean</i>, <i>variance</i>, <i>covariance</i> are the same over time. In particular, we want to check if the variance of data is stable over time.</dd>
<dt>Homoscedasity</dt><dd>Terminology for constant variance over time.</dd>
<dt>Heteroskedasticity</dt><dd>Terminology for a changing variance over time.</dd>
</dl>
</div>

<div id="outline-container-org755060a" class="outline-4">
<h4 id="org755060a"><span class="section-number-4">7.3.1</span> Breusch-Pagan Test</h4>
<div class="outline-text-4" id="text-7-3-1">
<p>
To check if the data is Homoscedasity or Heteroskedasticity.
</p>
<ul class="org-ul">
<li>\(H_0\): The data is Homoscedasity.</li>
<li>\(pvalue\le 0.05\): The data is Heteroskedasticity.(with 95% confidence)</li>
</ul>

<pre class="example" id="org0058252">
One Use Case:
It takes the residuals from a regression, and checks if they are dependent upon the
independent variables that we fed into the regression.

The test does this by performing a second regression of the residuals against the
independent variables, and checking if the coefficients from that second regression
are statistically significant (non-zero). Thus, the data is likely heteroscedastic.
</pre>
<div class="org-src-container">
<pre class="src src-python"><span style="color: #3a81c3; font-weight: bold;">from</span> statsmodels.stats.diagnostic <span style="color: #3a81c3; font-weight: bold;">import</span> het_breuschpagan
<span style="color: #715ab1;">result</span> = het_breuschpagan<span style="color: #3a81c3;">(</span>residuals, independent_vars<span style="color: #3a81c3;">)</span>
result.f_pvalue
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org07c73b4" class="outline-3">
<h3 id="org07c73b4"><span class="section-number-3">7.4</span> Transform into Normality &amp; Stationary</h3>
<div class="outline-text-3" id="text-7-4">
<ul class="org-ul">
<li>Use <code>log</code> function to get more normal data</li>
<li>Use \(ln(p_{t}/p_{t-1})\) to get more homosceedastic data.</li>
</ul>
</div>
<div id="outline-container-org1faf427" class="outline-4">
<h4 id="org1faf427"><span class="section-number-4">7.4.1</span> Apply Box-Cox Transformation</h4>
<div class="outline-text-4" id="text-7-4-1">
<p>
\[T(x)=\frac{x^{\lambda}-1}{\lambda}\]
</p>
<ul class="org-ul">
<li>\(\lambda\) is a constant value you can choose</li>
<li>inputs: any dataset</li>
<li>outputs: more normally distributed dataset</li>
<li>\(T(x)=\ln(x)\) if we choose \(\lambda=0\)</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-orgf2c0911" class="outline-3">
<h3 id="orgf2c0911"><span class="section-number-3">7.5</span> Regression</h3>
<div class="outline-text-3" id="text-7-5">
<p>
To use one or more <b>independent</b> variables to predict a <b>dependent</b> variable. The regression is
used to see how two assets move in relation to each other, e.g. Statistical Arbitrage.
</p>
</div>

<div id="outline-container-org768149d" class="outline-4">
<h4 id="org768149d"><span class="section-number-4">7.5.1</span> Linear Regression</h4>
<div class="outline-text-4" id="text-7-5-1">
<p>
Say \(y\) depends on \(x\)
\[y=\beta x + \alpha\]
</p>
<ul class="org-ul">
<li>\(\beta\) is coefficient</li>
<li>\(\alpha\) is intercept</li>
</ul>

<div id="org9275d77" class="figure">
<p><img src="../resources/MOOC/Trading/linear_regression.png" alt="linear_regression.png" />
</p>
</div>
<ul class="org-ul">
<li>Residuals(error terms): differences between the best fit regression line at each point.
<ul class="org-ul">
<li>\(residuals=y_{actual}-y_{predicted}\)</li>
<li>if residuals are not normally distributed, this gives us a hint that the model has a bias in its prediction errors. One way to improve is to use <b>Multiple Regression</b>.</li>
</ul></li>
</ul>

<div id="org5d2921b" class="figure">
<p><img src="../resources/MOOC/Trading/residuals.png" alt="residuals.png" />
</p>
</div>

<div class="org-src-container">
<pre class="src src-python"><span style="color: #3a81c3; font-weight: bold;">from</span> sklearn.linear_model <span style="color: #3a81c3; font-weight: bold;">import</span> LinearRegression

<span style="color: #3a81c3; font-weight: bold;">def</span> <span style="color: #6c3163; font-weight: bold;">regression_slope_and_intercept</span><span style="color: #3a81c3;">(</span>xSeries, ySeries<span style="color: #3a81c3;">)</span>:
    <span style="color: #da8b55;">"""</span>
<span style="color: #da8b55;">    xSeries: pandas series, x variable</span>
<span style="color: #da8b55;">    ySeries: pandas series, y variable</span>
<span style="color: #da8b55;">    """</span>
    <span style="color: #715ab1;">lr</span> = LinearRegression<span style="color: #3a81c3;">()</span>

    <span style="color: #715ab1;">xVar</span> = s1.values.reshape<span style="color: #3a81c3;">(</span>-1,1<span style="color: #3a81c3;">)</span> <span style="color: #2aa1ae; background-color: #ecf3ec;"># </span><span style="color: #2aa1ae; background-color: #ecf3ec;">reshape to 2D numpy array</span>
    <span style="color: #715ab1;">yVar</span> = s2.values.reshape<span style="color: #3a81c3;">(</span>-1,1<span style="color: #3a81c3;">)</span>

    lr.fit<span style="color: #3a81c3;">(</span>xVar, yVar<span style="color: #3a81c3;">)</span>

    <span style="color: #715ab1;">slope</span> = lr.coef_<span style="color: #3a81c3;">[</span>0<span style="color: #3a81c3;">][</span>0<span style="color: #3a81c3;">]</span>
    <span style="color: #715ab1;">intercept</span> = lr.intercept_<span style="color: #3a81c3;">[</span>0<span style="color: #3a81c3;">]</span>

    <span style="color: #3a81c3; font-weight: bold;">return</span> <span style="color: #3a81c3;">(</span>slope, intercept<span style="color: #3a81c3;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgeed7a68" class="outline-4">
<h4 id="orgeed7a68"><span class="section-number-4">7.5.2</span> Multiple Regression</h4>
<div class="outline-text-4" id="text-7-5-2">
<p>
\[y=\sum_{i=1}^{n}\beta_{i}x_{i} + \alpha\]
</p>
</div>
</div>

<div id="outline-container-org9b9399a" class="outline-4">
<h4 id="org9b9399a"><span class="section-number-4">7.5.3</span> Multivariate Multiple Regression</h4>
<div class="outline-text-4" id="text-7-5-3">
<p>
Use more than one independent variables to predict more than one dependent variables.
\[y_1=\sum_{i=1}^{n}\beta_{1i}x_{1i} + \alpha_1\]
\[y_2=\sum_{i=1}^{n}\beta_{2i}x_{2i} + \alpha_2\]
</p>
</div>
</div>

<div id="outline-container-orged495e6" class="outline-4">
<h4 id="orged495e6"><span class="section-number-4">7.5.4</span> Evaluating the Model</h4>
<div class="outline-text-4" id="text-7-5-4">
<ul class="org-ul">
<li>R-squared (\(R^2\)) metric: range from 0 to 1. R-squared is 1 means all the variation in the dependent variable can be explained by all the variation in the independent variable</li>
<li>Adjusted R-squared: to find the minimum combination of independent variables that are most relevant for our model.</li>
<li>F-test: checks whether coefficients and intercepts are not zero, therefore the model describes a meaningful relationship.
<ul class="org-ul">
<li>\(H_0\): parameters are zero.</li>
<li>\(pvalue\le 0.05\): parameters are not zero.</li>
</ul></li>
</ul>
</div>
</div>

<div id="outline-container-org0750449" class="outline-4">
<h4 id="org0750449"><span class="section-number-4">7.5.5</span> Pros and Cons</h4>
<div class="outline-text-4" id="text-7-5-5">
<ul class="org-ul">
<li>Pros
<ul class="org-ul">
<li>a tool to analyze time-series data</li>
<li>a fundamental building block of neural network</li>
</ul></li>
<li>Cons
<ul class="org-ul">
<li>Regression is sensitive to some choice you make about the model. For instance, how much historical data we choose to use in the model.</li>
<li>Regression is sensitive to <b>outliers</b> in the data. As it adds more noise to the trading data.</li>
</ul></li>
</ul>
</div>
</div>
</div>

<div id="outline-container-orgc7b4034" class="outline-3">
<h3 id="orgc7b4034"><span class="section-number-3">7.6</span> Time Series Modeling</h3>
<div class="outline-text-3" id="text-7-6">
<ul class="org-ul">
<li>Auto-regression</li>
<li>Moving Averages</li>
<li>Auto-regressive Moving Averages</li>
<li>Auto-regressive Integrated Moving Averages</li>
<li>Machine Learning Methods
<ul class="org-ul">
<li>Kalman and Particle Filters</li>
<li>Recurrent Neural Networks</li>
</ul></li>
</ul>
</div>

<div id="outline-container-org7ad1eec" class="outline-4">
<h4 id="org7ad1eec"><span class="section-number-4">7.6.1</span> Autoregressive(AR) Model</h4>
<div class="outline-text-4" id="text-7-6-1">
<p>
AR model tries to fit a line that is a liner combination of previous values.
\[y_t = \alpha + B_{1}y_{t-1} + B_{2}y_{t-2} + ... + \epsilon_t\]
</p>
<ul class="org-ul">
<li>\(\alpha\): intercept</li>
<li>\(B_i\): coefficients</li>
<li>\(\epsilon_t\): Error(noise), represents movements that cannot be predicted using the previous values.</li>
<li>Lag: the number of past values used in the model. e.g. AR Lag 2 model</li>
<li>Describe an AR model as \(AR(p)\), where p stands for the lag.</li>
<li>Check the adjusted R-squared(Adj \(R^2\)) and adjust the lag.</li>
<li><b>Vector Autoregressive Model</b>: similar with Multivariate Multiple Regression
<img src="../resources/MOOC/Trading/vector_autoregressive_mode.png" alt="vector_autoregressive_mode.png" /></li>
</ul>
</div>
</div>

<div id="outline-container-org2a85c2b" class="outline-4">
<h4 id="org2a85c2b"><span class="section-number-4">7.6.2</span> Moving Average(MA) Model</h4>
<div class="outline-text-4" id="text-7-6-2">
<p>
\[y_t=\mu+\epsilon_t+\theta_1\epsilon_{t-1}+\theta_2\epsilon_{t-2}+...\theta_q\epsilon_{t-q}\]
</p>
<ul class="org-ul">
<li>\(MA(q)\), where q stands for the lag.</li>
<li>To decide the best value for q, draw a <b>autocorrelation</b> plot.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</body>
</html>
